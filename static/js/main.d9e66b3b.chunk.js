(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{57:function(e,t,r){e.exports=r(78)},64:function(e,t,r){},78:function(e,t,r){"use strict";r.r(t);r(58);var n=r(0),a=r.n(n),o=r(9),c=r.n(o),i=r(15),u=r(79),l=r(111),s=r(109),f=r(110),h=r(112),d=r(48),v=r(29),m=function(e,t){var r=new URL(e);return r.search=function(e){var t=new URLSearchParams;return Object.entries(e).forEach(function(e){var r=Object(i.a)(e,2),n=r[0],a=r[1];return t.append(n,a)}),t.toString()}(t),r.href},y=function(e){return Math.round(100*e)/100},b=function(e){return String.fromCharCode("A".charCodeAt(0)+e)},g=r(39),p=r.n(g),x=p()("red"),w=p()("green").toHsv().h-x.toHsv().h,S=Object(v.range)(100).map(function(e){var t=x.toHsv();return p()(Object(d.a)({},t,{h:t.h+w*e/100})).toRgbString()}),E=function(e){var t=Math.round(e);return 0===t?"":S[t-1]},N=(r(64),r(27)),O=r(53),j=20,k=function(e){var t=e.graphState,r=e.width,o=void 0===r?400:r,c=e.height,u=void 0===c?400:c,l=Object(n.useRef)(null),s=Object(n.useState)(null),f=Object(i.a)(s,2),h=f[0],d=f[1],m=Object(n.useMemo)(function(){return function(e,t){var r=Object(v.keyBy)(t?t.nodes:[],function(e){return e.nodeName}),n=e.vertexNames.map(function(e,t){var n={nodeName:e,index:t},a=r[e];return a&&(n.x=a.x,n.y=a.y),n}),a=e.nbVertex(),o=[],c=!0,i=!1,u=void 0;try{for(var l,s=Object(v.range)(0,a)[Symbol.iterator]();!(c=(l=s.next()).done);c=!0){var f=l.value,h=!0,d=!1,m=void 0;try{for(var y,b=Object(v.range)(f+1,a)[Symbol.iterator]();!(h=(y=b.next()).done);h=!0){var g=y.value,p=e.score100(f,g);0!==p&&o.push({edgeId:e.vertexName(f)+"-"+e.vertexName(g),source:e.vertexName(f),target:e.vertexName(g),score:p})}}catch(x){d=!0,m=x}finally{try{h||null==b.return||b.return()}finally{if(d)throw m}}}}catch(x){i=!0,u=x}finally{try{c||null==s.return||s.return()}finally{if(i)throw u}}return{links:o,nodes:n}}(t,h)},[t]);h!==m&&d(m);var y=l.current;return Object(n.useEffect)(function(){if(null!==y){var e=N.e().force("link",N.c().id(function(e){return e.nodeName}).distance(function(e){return 30+100*(1-e.score/100)})).force("collide",N.b(1.5*j)).force("charge",N.d().strength(function(){return-10})).force("center",N.a(o/2,u/2)),t=O.a(y),r=t.append("g").attr("class","ForceGraph__Links").selectAll("line").data(m.links).enter().append("line").attr("stroke",function(e){return E(e.score)});r.append("title").text(function(e){return e.edgeId+": "+e.score});var n=t.append("g").attr("class","ForceGraph__Nodes").selectAll("g").data(m.nodes).enter().append("g").attr("class","ForceGraph__NodeGroup");return n.append("circle").attr("class","ForceGraph__NodeCircle").attr("cx",j/2).attr("cy",j/2).attr("r",j),n.append("text").attr("class","ForceGraph__NodeText").attr("x",j/2).attr("y",j/2).text(function(e){return e.nodeName}),n.append("title").text(function(e){return e.nodeName}),e.nodes(m.nodes).on("tick",function(){r.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),n.attr("transform",function(e){return"translate(".concat(e.x-j/2,",").concat(e.y-j/2,")")})}),e.force("link").links(m.links),function(){for(e.stop();y.firstChild;)y.removeChild(y.firstChild)}}},[o,u,y,m]),a.a.createElement("svg",{width:o,height:u,ref:l})},C=r(28),V=r(49),_=r(43),G=function(){function e(t,r){Object(V.a)(this,e),this.vertexNames=t,this.scoreMatrix=r}return Object(_.a)(e,null,[{key:"fromEdgeScores",value:function(t){var r=new Set;Object.keys(t).forEach(function(e){var t=I(e),n=Object(i.a)(t,2),a=n[0],o=n[1];r.add(a),r.add(o)});var n=Array.from(r).sort(),a=n.reduce(function(e,t,r){return e[t]=r,e},{}),o=new e(n,[]);return Object.keys(t).forEach(function(e){var r=I(e),n=Object(i.a)(r,2),c=n[0],u=n[1];o=o.withScore100(a[c],a[u],t[e])}),o}}]),Object(_.a)(e,[{key:"score100",value:function(e,t){return e===t?100:e>t?this.score100(t,e):(this.scoreMatrix[e]||[])[t]||0}},{key:"score1",value:function(e,t){return this.score100(e,t)/100}},{key:"nbVertex",value:function(){return this.vertexNames.length}},{key:"withNbVertex",value:function(e){return e<this.vertexNames.length?this.withVertexNames(this.vertexNames.slice(0,e)):this.withVertexNames(Object(v.range)(e).map(b))}},{key:"withVertexNames",value:function(t){return new e(t,this.scoreMatrix)}},{key:"vertexName",value:function(e){return this.vertexNames[e]}},{key:"withScore100",value:function(t,r,n){if(t===r)throw new Error("Score not modifiable");if(t>r)return this.withScore100(r,t,n);try{var a=this.scoreMatrix,o=this.normalize(n),c=Object(C.a)(a[t]||[]);if(o===c[r])return this;c[r]=o;var i=Object(C.a)(a);return i[t]=c,new e(this.vertexNames,i)}catch(u){throw console.log(u),u}}},{key:"withResetedScores",value:function(){return e.createEmpty(this.vertexNames)}},{key:"computeConfidenceScore",value:function(){var e=this.nbVertex(),t=0,r=!0,n=!1,a=void 0;try{for(var o,c=Object(v.range)(0,e)[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var i=o.value,u=!0,l=!1,s=void 0;try{for(var f,h=Object(v.range)(i+1,e)[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value;t+=this.score100(i,d)||0}}catch(m){l=!0,s=m}finally{try{u||null==h.return||h.return()}finally{if(l)throw s}}}}catch(m){n=!0,a=m}finally{try{r||null==c.return||c.return()}finally{if(n)throw a}}return t/(e*(e-1)/2)}},{key:"normalize",value:function(e){return Math.max(Math.min(e,100),0)}},{key:"toEdgeScores",value:function(){var e={},t=this.nbVertex(),r=!0,n=!1,a=void 0;try{for(var o,c=Object(v.range)(0,t)[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var i=o.value,u=!0,l=!1,s=void 0;try{for(var f,h=Object(v.range)(i+1,t)[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value,m=this.score100(i,d);if(0!==m)e[this.vertexName(i)+"-"+this.vertexName(d)]=m}}catch(y){l=!0,s=y}finally{try{u||null==h.return||h.return()}finally{if(l)throw s}}}}catch(y){n=!0,a=y}finally{try{r||null==c.return||c.return()}finally{if(n)throw a}}return e}}]),e}();G.createEmpty=function(e){return new G(e,[])};var I=function(e){var t=e.split("-");if(2!==t.length)throw new Error("Invalid edge def "+e+". It must be of form <Node1>-<Node2>");var r=t[0],n=t[1];if(r===n)throw new Error("Edge def "+e+" uses twice the same node");return r<n?[r,n]:[n,r]},M=function(e){var t=e.graphState,r=e.onGraphStateChange;return a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("td",null),Object(v.range)(t.nbVertex()).map(function(e){return e>=1&&a.a.createElement("td",{key:e},t.vertexName(e))}))),a.a.createElement("tbody",null,Object(v.range)(t.nbVertex()).map(function(e){return e<t.nbVertex()-1&&a.a.createElement("tr",{key:e},a.a.createElement("td",null,t.vertexName(e)),Object(v.range)(t.nbVertex()).map(function(n){return n>=1&&(e<n?a.a.createElement("td",{key:n,style:{backgroundColor:E(t.score100(e,n))}},r?a.a.createElement(l.a,{inputProps:{min:"0",max:"100",step:"5"},type:"number",value:t.score100(e,n),onChange:function(a){var o=Number(a.target.value);isNaN(o)||r(t.withScore100(e,n,o))}}):a.a.createElement("div",null,y(t.score100(e,n)))):a.a.createElement("td",{key:n}))}))})))},R=function(e){return{iterations:[e]}},A=function(e){var t=e.iterations.length,r=e.iterations[t-1];return{iterations:[].concat(Object(C.a)(e.iterations),[L(r,t-1)])}},U=function(e){return e.iterations.length<e.iterations[0].nbVertex()},L=function(e,t){console.log("iteration"+t);var r=e,n=!0,a=!1,o=void 0;try{for(var c,i=Object(v.range)(r.nbVertex())[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var u=c.value,l=!0,s=!1,f=void 0;try{for(var h,d=Object(v.range)(r.nbVertex())[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var m=h.value,y=r.score1(u,m),b=r.score1(u,t)*r.score1(t,m);y<b&&(r=r.withScore100(u,m,100*b))}}catch(g){s=!0,f=g}finally{try{l||null==d.return||d.return()}finally{if(s)throw f}}}}catch(g){a=!0,o=g}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return console.log("graphState",e,"newGrpahState",r),r},P="edges",F=function(){var e=new URLSearchParams(window.location.search);if(e.has(P))try{return G.fromEdgeScores(JSON.parse(e.get(P)))}catch(t){}return G.createEmpty(Object(v.range)(0,7).map(b))},J="delay",T=function(){var e=new URLSearchParams(window.location.search);if(e.has(J))try{return Number(e.get(J))}catch(t){}return 300},B="auto",H=function(){var e=new URLSearchParams(window.location.search);return!!e.has(B)&&"true"===e.get(B)},z=r(25);var D=function(e){var t=e.confidenceScore;return a.a.createElement(u.a,{variant:"subtitle1"},"Confidence Score:"," ",a.a.createElement("span",{style:{backgroundColor:E(t)}},y(t)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(function(){var e=a.a.useState(H()),t=Object(i.a)(e,2),r=t[0],o=t[1],c=a.a.useState(F()),d=Object(i.a)(c,2),v=d[0],y=d[1],b=a.a.useState(r?v:null),g=Object(i.a)(b,2),p=g[0],x=g[1],w=a.a.useState(T()),S=Object(i.a)(w,2),E=S[0],N=S[1],O=a.a.useState(null),j=Object(i.a)(O,2),C=j[0],V=j[1],_=function(e){y(e),r&&x(e)};return Object(n.useEffect)(function(){!function(e,t,r){var n,a=(n={},Object(z.a)(n,J,String(e)),Object(z.a)(n,B,String(t)),Object(z.a)(n,P,JSON.stringify(r.toEdgeScores())),n),o=window.location.href,c=m(o,a);c!==o&&window.history.pushState("","Update Params",c)}(E,r,v)},[v,r,E]),Object(n.useEffect)(function(){if(null!==p){var e,t=R(p);return V(t),U(t)&&(e=setTimeout(function r(){t=A(t),V(t),U(t)&&(e=setTimeout(r,E))},E)),function(){clearTimeout(e)}}},[p,E]),a.a.createElement("div",{className:"App",style:{display:"flex",height:"1vh"}},a.a.createElement("div",null,a.a.createElement(u.a,{variant:"h5"},"Input"),a.a.createElement(l.a,{label:"Node Count",type:"number",value:v.nbVertex(),onChange:function(e){var t=Number(e.target.value);isNaN(t)||_(v.withNbVertex(t))}}),a.a.createElement(s.a,{onClick:function(){_(v.withResetedScores())}},"Clear Scores"),a.a.createElement(M,{graphState:v,onGraphStateChange:_}),a.a.createElement(D,{confidenceScore:v.computeConfidenceScore()}),a.a.createElement("pre",null,JSON.stringify(v.toEdgeScores(),null,"  ")),a.a.createElement(k,{graphState:v})),a.a.createElement("div",null,a.a.createElement(u.a,{variant:"h5"},"New Confidence Score"),a.a.createElement("div",null,a.a.createElement(f.a,{control:a.a.createElement(h.a,{checked:r,onChange:function(e,t){var r;o(r=t),r&&x(v)}}),label:"Auto Compute"}),!r&&a.a.createElement(s.a,{onClick:function(){x(v)},disabled:!!C&&U(C)},"Compute now"),a.a.createElement(l.a,{label:"Iteartion Delay",type:"number",disabled:!!C&&U(C),value:E,onChange:function(e){var t=Number(e.target.value);isNaN(t)||N(t)}})),C&&C.iterations.map(function(e,t){var r=C.iterations.length-t-1,n=C.iterations[r];return a.a.createElement("div",{key:r,style:{display:"flex",flexDirection:"row"}},a.a.createElement("div",null,a.a.createElement(u.a,{variant:"h6"},"Iteration ",r),a.a.createElement(u.a,{variant:"subtitle1"},0===r?"Input State":"Using paths through node "+n.vertexName(r)),a.a.createElement(M,{graphState:n}),a.a.createElement(D,{confidenceScore:n.computeConfidenceScore()})),a.a.createElement("div",null,a.a.createElement(k,{graphState:n})))})))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[57,1,2]]]);
//# sourceMappingURL=main.d9e66b3b.chunk.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{55:function(e,t,r){e.exports=r(74)},74:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(9),c=r.n(o),i=r(25),u=r(15),l=r(75),s=r(107),f=r(105),h=r(106),v=r(108),m=r(27),d=r(47),b=r(41),y=r(46),w=function(e,t){var r=new URL(e);return r.search=function(e){var t=new URLSearchParams;return Object.entries(e).forEach(function(e){var r=Object(u.a)(e,2),n=r[0],a=r[1];return t.append(n,a)}),t.toString()}(t),r.href},g=function(e){return Math.round(100*e)/100},S=function(){function e(t,r){Object(d.a)(this,e),this.vertexNames=t,this.scoreMatrix=r}return Object(b.a)(e,null,[{key:"fromEdgeScores",value:function(t){var r=new Set;Object.keys(t).forEach(function(e){var t=p(e),n=Object(u.a)(t,2),a=n[0],o=n[1];r.add(a),r.add(o)});var n=Array.from(r).sort(),a=n.reduce(function(e,t,r){return e[t]=r,e},{}),o=new e(n,[]);return Object.keys(t).forEach(function(e){var r=p(e),n=Object(u.a)(r,2),c=n[0],i=n[1];o=o.withScore100(a[c],a[i],t[e])}),o}}]),Object(b.a)(e,[{key:"score100",value:function(e,t){return e===t?100:e>t?this.score100(t,e):(this.scoreMatrix[e]||[])[t]||0}},{key:"score1",value:function(e,t){return this.score100(e,t)/100}},{key:"nbVertex",value:function(){return this.vertexNames.length}},{key:"withNbVertex",value:function(e){return e<this.vertexNames.length?this.withVertexNames(this.vertexNames.slice(0,e)):this.withVertexNames(Object(y.range)(e).map(function(e){return E(e)}))}},{key:"withVertexNames",value:function(t){return new e(t,this.scoreMatrix)}},{key:"vertexName",value:function(e){return this.vertexNames[e]}},{key:"withScore100",value:function(t,r,n){if(t===r)throw new Error("Score not modifiable");if(t>r)return this.withScore100(r,t,n);try{var a=this.scoreMatrix,o=Object(m.a)(a[t]||[]);o[r]=this.normalize(n);var c=Object(m.a)(a);return c[t]=o,new e(this.vertexNames,c)}catch(i){throw console.log(i),i}}},{key:"withResetedScores",value:function(){return new e(this.vertexNames,[])}},{key:"computeConfidenceScore",value:function(){var e=this.nbVertex(),t=0,r=!0,n=!1,a=void 0;try{for(var o,c=Object(y.range)(0,e)[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var i=o.value,u=!0,l=!1,s=void 0;try{for(var f,h=Object(y.range)(i+1,e)[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var v=f.value;t+=this.score100(i,v)||0}}catch(m){l=!0,s=m}finally{try{u||null==h.return||h.return()}finally{if(l)throw s}}}}catch(m){n=!0,a=m}finally{try{r||null==c.return||c.return()}finally{if(n)throw a}}return t/(e*(e-1)/2)}},{key:"normalize",value:function(e){return Math.max(Math.min(e,100),0)}},{key:"toEdgeScores",value:function(){var e={},t=this.nbVertex(),r=!0,n=!1,a=void 0;try{for(var o,c=Object(y.range)(0,t)[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var i=o.value,u=!0,l=!1,s=void 0;try{for(var f,h=Object(y.range)(i+1,t)[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var v=f.value,m=this.score100(i,v);if(0!==m)e[this.vertexName(i)+"-"+this.vertexName(v)]=m}}catch(d){l=!0,s=d}finally{try{u||null==h.return||h.return()}finally{if(l)throw s}}}}catch(d){n=!0,a=d}finally{try{r||null==c.return||c.return()}finally{if(n)throw a}}return e}}]),e}(),E=function(e){return String.fromCharCode("A".charCodeAt(0)+e)},p=function(e){var t=e.split("-");if(2!==t.length)throw new Error("Invalid edge def "+e+". It must be of form <Node1>-<Node2>");var r=t[0],n=t[1];if(r===n)throw new Error("Edge def "+e+" uses twice the same node");return r<n?[r,n]:[n,r]},x=r(48),O=r(37),j=r.n(O),N=j()("red"),k=j()("green").toHsv().h-N.toHsv().h,C=Object(y.range)(100).map(function(e){var t=N.toHsv();return j()(Object(x.a)({},t,{h:t.h+k*e/100})).toRgbString()}),V=function(e){var t=Math.round(e);return 0===t?"":C[t-1]},M=function(e){var t=e.graphState,r=e.onGraphStateChange;return a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("td",null),Object(y.range)(t.nbVertex()).map(function(e){return e>=1&&a.a.createElement("td",{key:e},t.vertexName(e))}))),a.a.createElement("tbody",null,Object(y.range)(t.nbVertex()).map(function(e){return e<t.nbVertex()-1&&a.a.createElement("tr",{key:e},a.a.createElement("td",null,t.vertexName(e)),Object(y.range)(t.nbVertex()).map(function(n){return n>=1&&(e<n?a.a.createElement("td",{key:n,style:{backgroundColor:V(t.score100(e,n))}},r?a.a.createElement(s.a,{inputProps:{min:"0",max:"100",step:"5"},type:"number",value:t.score100(e,n),onChange:function(a){var o=Number(a.target.value);isNaN(o)||r(t.withScore100(e,n,o))}}):a.a.createElement("div",null,g(t.score100(e,n)))):a.a.createElement("td",{key:n}))}))})))},R=function(e){return{iterations:[e]}},I=function(e){var t=e.iterations.length,r=e.iterations[t-1];return{iterations:[].concat(Object(m.a)(e.iterations),[U(r,t-1)])}},P=function(e){return e.iterations.length<e.iterations[0].nbVertex()},U=function(e,t){console.log("iteration"+t);var r=e,n=!0,a=!1,o=void 0;try{for(var c,i=Object(y.range)(r.nbVertex())[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var u=c.value,l=!0,s=!1,f=void 0;try{for(var h,v=Object(y.range)(r.nbVertex())[Symbol.iterator]();!(l=(h=v.next()).done);l=!0){var m=h.value,d=r.score1(u,m),b=r.score1(u,t)*r.score1(t,m);d<b&&(r=r.withScore100(u,m,100*b))}}catch(w){s=!0,f=w}finally{try{l||null==v.return||v.return()}finally{if(s)throw f}}}}catch(w){a=!0,o=w}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return console.log("graphState",e,"newGrpahState",r),r},A="edges",J=function(){var e=new URLSearchParams(window.location.search);if(e.has(A))try{return S.fromEdgeScores(JSON.parse(e.get(A)))}catch(t){}return function(e){var t=Object(y.range)(e).map(function(e){return E(e)});return new S(t,[])}(7)},L="delay",G=function(){var e=new URLSearchParams(window.location.search);if(e.has(L))try{return Number(e.get(L))}catch(t){}return 300},H="auto",T=function(){var e=new URLSearchParams(window.location.search);return!!e.has(H)&&"true"===e.get(H)};var z=function(e){var t=e.confidenceScore;return a.a.createElement(l.a,{variant:"subtitle1"},"Confidence Score:"," ",a.a.createElement("span",{style:{backgroundColor:V(t)}},g(t)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(function(){var e=a.a.useState(T()),t=Object(u.a)(e,2),r=t[0],o=t[1],c=a.a.useState(J()),m=Object(u.a)(c,2),d=m[0],b=m[1],y=a.a.useState(r?d:null),g=Object(u.a)(y,2),S=g[0],E=g[1],p=a.a.useState(G()),x=Object(u.a)(p,2),O=x[0],j=x[1],N=a.a.useState(null),k=Object(u.a)(N,2),C=k[0],V=k[1],U=function(e){b(e),r&&E(e)};return Object(n.useEffect)(function(){!function(e,t,r){var n,a=(n={},Object(i.a)(n,L,String(e)),Object(i.a)(n,H,String(t)),Object(i.a)(n,A,JSON.stringify(r.toEdgeScores())),n),o=window.location.href,c=w(o,a);c!==o&&window.history.pushState("","Update Params",c)}(O,r,d)},[d,r,O]),Object(n.useEffect)(function(){if(null!==S){var e,t=R(S);return V(t),P(t)&&(e=setTimeout(function r(){t=I(t),V(t),P(t)&&(e=setTimeout(r,O))},O)),function(){clearTimeout(e)}}},[S,O]),a.a.createElement("div",{className:"App",style:{display:"flex",height:"1vh"}},a.a.createElement("div",null,a.a.createElement(l.a,{variant:"h6"},"Input"),a.a.createElement(s.a,{label:"Node Count",type:"number",value:d.nbVertex(),onChange:function(e){var t=Number(e.target.value);isNaN(t)||U(d.withNbVertex(t))}}),a.a.createElement(f.a,{onClick:function(){U(d.withResetedScores())}},"Clear Scores"),a.a.createElement(M,{graphState:d,onGraphStateChange:U}),a.a.createElement(z,{confidenceScore:d.computeConfidenceScore()}),a.a.createElement("pre",null,JSON.stringify(d.toEdgeScores(),null,"  "))),a.a.createElement("div",null,a.a.createElement(l.a,{variant:"h6"},"New Confidence Score"),a.a.createElement("div",null,a.a.createElement(h.a,{control:a.a.createElement(v.a,{checked:r,onChange:function(e,t){var r;o(r=t),r&&E(d)}}),label:"Auto Compute"}),!r&&a.a.createElement(f.a,{onClick:function(){E(d)},disabled:!!C&&P(C)},"Compute now"),a.a.createElement(s.a,{label:"Iteartion Delay",type:"number",disabled:!!C&&P(C),value:O,onChange:function(e){var t=Number(e.target.value);isNaN(t)||j(t)}})),C&&C.iterations.map(function(e,t){var r=C.iterations.length-t-1,n=C.iterations[r];return a.a.createElement("div",{key:r},a.a.createElement("h3",null,"Iteration ",r,0===r&&" (Input State)"),a.a.createElement(M,{graphState:n}),a.a.createElement(z,{confidenceScore:n.computeConfidenceScore()}))})))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[55,1,2]]]);
//# sourceMappingURL=main.2532a3a5.chunk.js.map
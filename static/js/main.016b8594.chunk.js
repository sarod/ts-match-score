(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{57:function(e,t,r){e.exports=r(79)},63:function(e,t,r){},64:function(e,t,r){},79:function(e,t,r){"use strict";r.r(t);r(58);var n=r(0),a=r.n(n),o=r(9),c=r.n(o),i=r(15),l=(r(63),r(80)),u=r(112),s=r(110),f=r(111),h=r(113),d=(r(64),r(27)),v=r(53),m=r(30),y=function(e,t){var r=new URL(e);return r.search=function(e){var t=new URLSearchParams;return Object.entries(e).forEach(function(e){var r=Object(i.a)(e,2),n=r[0],a=r[1];return t.append(n,a)}),t.toString()}(t),r.href},b=function(e){return String.fromCharCode("A".charCodeAt(0)+e)},g=r(48),p=r(29),x=r.n(p),w=x()("#f44335"),S=x()("#4caf50").toHsv().h-w.toHsv().h,E=Object(m.range)(100).map(function(e){var t=w.toHsv();return x()(Object(g.a)({},t,{h:t.h+S*e/100})).toRgbString()}),N=function(e){var t=Math.round(e);return 0===t?"":E[t-1]},O=20,j=function(e){var t=e.graphState,r=e.width,o=void 0===r?400:r,c=e.height,l=void 0===c?400:c,u=Object(n.useRef)(null),s=Object(n.useState)(null),f=Object(i.a)(s,2),h=f[0],y=f[1],b=Object(n.useMemo)(function(){return function(e,t){var r=Object(m.keyBy)(t?t.nodes:[],function(e){return e.nodeName}),n=e.vertexNames.map(function(e,t){var n={nodeName:e,index:t},a=r[e];return a&&(n.x=a.x,n.y=a.y),n}),a=e.nbVertex(),o=[],c=!0,i=!1,l=void 0;try{for(var u,s=Object(m.range)(0,a)[Symbol.iterator]();!(c=(u=s.next()).done);c=!0){var f=u.value,h=!0,d=!1,v=void 0;try{for(var y,b=Object(m.range)(f+1,a)[Symbol.iterator]();!(h=(y=b.next()).done);h=!0){var g=y.value,p=e.score100(f,g);0!==p&&o.push({edgeId:e.vertexName(f)+"-"+e.vertexName(g),source:e.vertexName(f),target:e.vertexName(g),score:p})}}catch(x){d=!0,v=x}finally{try{h||null==b.return||b.return()}finally{if(d)throw v}}}}catch(x){i=!0,l=x}finally{try{c||null==s.return||s.return()}finally{if(i)throw l}}return{links:o,nodes:n}}(t,h)},[t]);h!==b&&y(b);var g=u.current;return Object(n.useEffect)(function(){if(null!==g){var e=d.e().force("link",d.c().id(function(e){return e.nodeName}).distance(function(e){return 30+100*(1-e.score/100)})).force("collide",d.b(1.5*O)).force("charge",d.d().strength(function(){return-10})).force("center",d.a(o/2,l/2)),t=v.a(g),r=t.append("g").attr("class","ForceGraph__Links").selectAll("line").data(b.links).enter().append("line").attr("stroke",function(e){return N(e.score)});r.append("title").text(function(e){return e.edgeId+": "+e.score});var n=t.append("g").attr("class","ForceGraph__Nodes").selectAll("g").data(b.nodes).enter().append("g").attr("class","ForceGraph__NodeGroup");return n.append("circle").attr("class","ForceGraph__NodeCircle").attr("cx",O/2).attr("cy",O/2).attr("r",O),n.append("text").attr("class","ForceGraph__NodeText").attr("x",O/2).attr("y",O/2).text(function(e){return e.nodeName}),n.append("title").text(function(e){return e.nodeName}),e.nodes(b.nodes).on("tick",function(){r.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),n.attr("transform",function(e){return"translate(".concat(e.x-O/2,",").concat(e.y-O/2,")")})}),e.force("link").links(b.links),function(){for(e.stop();g.firstChild;)g.removeChild(g.firstChild)}}},[o,l,g,b]),a.a.createElement("svg",{width:o,height:l,ref:u})},k=function(e){var t,r,n=e.score;return a.a.createElement("div",{style:{display:"inline-block",width:"50px",textAlign:"right",paddingRight:"8px",backgroundColor:N(n),color:(r=n,x.a.mostReadable(N(r),["white","black"]).toString())}},(t=n,Math.round(100*t)/100))},C=r(28),V=r(49),A=r(43),R=function(){function e(t,r){Object(V.a)(this,e),this.vertexNames=t,this.scoreMatrix=r}return Object(A.a)(e,null,[{key:"fromEdgeScores",value:function(t){var r=new Set;Object.keys(t).forEach(function(e){var t=_(e),n=Object(i.a)(t,2),a=n[0],o=n[1];r.add(a),r.add(o)});var n=Array.from(r).sort(),a=n.reduce(function(e,t,r){return e[t]=r,e},{}),o=new e(n,[]);return Object.keys(t).forEach(function(e){var r=_(e),n=Object(i.a)(r,2),c=n[0],l=n[1];o=o.withScore100(a[c],a[l],t[e])}),o}}]),Object(A.a)(e,[{key:"score100",value:function(e,t){return e===t?100:e>t?this.score100(t,e):(this.scoreMatrix[e]||[])[t]||0}},{key:"score1",value:function(e,t){return this.score100(e,t)/100}},{key:"nbVertex",value:function(){return this.vertexNames.length}},{key:"withNbVertex",value:function(e){return e<this.vertexNames.length?this.withVertexNames(this.vertexNames.slice(0,e)):this.withVertexNames(Object(m.range)(e).map(b))}},{key:"withVertexNames",value:function(t){return new e(t,this.scoreMatrix)}},{key:"vertexName",value:function(e){return this.vertexNames[e]}},{key:"withScore100",value:function(t,r,n){if(t===r)throw new Error("Score not modifiable");if(t>r)return this.withScore100(r,t,n);try{var a=this.scoreMatrix,o=this.normalize(n),c=Object(C.a)(a[t]||[]);if(o===c[r])return this;c[r]=o;var i=Object(C.a)(a);return i[t]=c,new e(this.vertexNames,i)}catch(l){throw console.log(l),l}}},{key:"withResetedScores",value:function(){return e.createEmpty(this.vertexNames)}},{key:"computeConfidenceScore",value:function(){var e=this.nbVertex(),t=0,r=!0,n=!1,a=void 0;try{for(var o,c=Object(m.range)(0,e)[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var i=o.value,l=!0,u=!1,s=void 0;try{for(var f,h=Object(m.range)(i+1,e)[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var d=f.value;t+=this.score100(i,d)||0}}catch(v){u=!0,s=v}finally{try{l||null==h.return||h.return()}finally{if(u)throw s}}}}catch(v){n=!0,a=v}finally{try{r||null==c.return||c.return()}finally{if(n)throw a}}return t/(e*(e-1)/2)}},{key:"normalize",value:function(e){return Math.max(Math.min(e,100),0)}},{key:"toEdgeScores",value:function(){var e={},t=this.nbVertex(),r=!0,n=!1,a=void 0;try{for(var o,c=Object(m.range)(0,t)[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var i=o.value,l=!0,u=!1,s=void 0;try{for(var f,h=Object(m.range)(i+1,t)[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var d=f.value,v=this.score100(i,d);if(0!==v)e[this.vertexName(i)+"-"+this.vertexName(d)]=v}}catch(y){u=!0,s=y}finally{try{l||null==h.return||h.return()}finally{if(u)throw s}}}}catch(y){n=!0,a=y}finally{try{r||null==c.return||c.return()}finally{if(n)throw a}}return e}}]),e}();R.createEmpty=function(e){return new R(e,[])};var _=function(e){var t=e.split("-");if(2!==t.length)throw new Error("Invalid edge def "+e+". It must be of form <Node1>-<Node2>");var r=t[0],n=t[1];if(r===n)throw new Error("Edge def "+e+" uses twice the same node");return r<n?[r,n]:[n,r]},G=function(e){var t=e.graphState,r=e.onGraphStateChange;return a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("td",null),Object(m.range)(t.nbVertex()).map(function(e){return e>=1&&a.a.createElement("td",{key:e,style:{textAlign:"center"}},t.vertexName(e))}))),a.a.createElement("tbody",null,Object(m.range)(t.nbVertex()).map(function(e){return e<t.nbVertex()-1&&a.a.createElement("tr",{key:e},a.a.createElement("td",{style:{textAlign:"right"}},t.vertexName(e)),Object(m.range)(t.nbVertex()).map(function(n){return n>=1&&(e<n?a.a.createElement("td",{key:n,style:{backgroundColor:N(t.score100(e,n)),width:"50px"}},r?a.a.createElement(u.a,{inputProps:{min:"0",max:"100",step:"5",style:{textAlign:"right"}},type:"number",value:t.score100(e,n),onChange:function(a){var o=Number(a.target.value);isNaN(o)||r(t.withScore100(e,n,o))}}):a.a.createElement(l.a,{variant:"subtitle1"},a.a.createElement(k,{score:t.score100(e,n)}))):a.a.createElement("td",{key:n}))}))})))},M=function(e){return{iterations:[e]}},I=function(e){var t=e.iterations.length-1,r=e.iterations[t];return{iterations:[].concat(Object(C.a)(e.iterations),[P(r,t)])}},L=function(e){return e.iterations.length<e.iterations[0].nbVertex()+1},P=function(e,t){console.log("k (0 based): "+t);var r=e,n=!0,a=!1,o=void 0;try{for(var c,i=Object(m.range)(r.nbVertex())[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var l=c.value,u=!0,s=!1,f=void 0;try{for(var h,d=Object(m.range)(r.nbVertex())[Symbol.iterator]();!(u=(h=d.next()).done);u=!0){var v=h.value,y=r.score1(l,v),b=r.score1(l,t)*r.score1(t,v);y<b&&(r=r.withScore100(l,v,100*b))}}catch(g){s=!0,f=g}finally{try{u||null==d.return||d.return()}finally{if(s)throw f}}}}catch(g){a=!0,o=g}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return console.log("graphState",e,"newGrpahState",r),r},U="edges",F=function(){var e=new URLSearchParams(window.location.search);if(e.has(U))try{return R.fromEdgeScores(JSON.parse(e.get(U)))}catch(t){}return R.createEmpty(Object(m.range)(0,7).map(b))},J="delay",T=function(){var e=new URLSearchParams(window.location.search);if(e.has(J))try{return Number(e.get(J))}catch(t){}return 300},B="auto",H=function(){var e=new URLSearchParams(window.location.search);return!!e.has(B)&&"true"===e.get(B)},z=r(25);var D=function(e){var t=e.confidenceScore;return a.a.createElement(l.a,{variant:"subtitle1"},"Confidence Score: ",a.a.createElement(k,{score:t}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(function(){var e=a.a.useState(H()),t=Object(i.a)(e,2),r=t[0],o=t[1],c=a.a.useState(F()),d=Object(i.a)(c,2),v=d[0],m=d[1],b=a.a.useState(r?v:null),g=Object(i.a)(b,2),p=g[0],x=g[1],w=a.a.useState(T()),S=Object(i.a)(w,2),E=S[0],N=S[1],O=a.a.useState(null),k=Object(i.a)(O,2),C=k[0],V=k[1],A=function(e){m(e),r&&x(e)};return Object(n.useEffect)(function(){!function(e,t,r){var n,a=(n={},Object(z.a)(n,J,String(e)),Object(z.a)(n,B,String(t)),Object(z.a)(n,U,JSON.stringify(r.toEdgeScores())),n),o=window.location.href,c=y(o,a);c!==o&&window.history.pushState("","Update Params",c)}(E,r,v)},[v,r,E]),Object(n.useEffect)(function(){if(null!==p){var e,t=M(p);return V(t),L(t)&&(e=setTimeout(function r(){t=I(t),V(t),L(t)&&(e=setTimeout(r,E))},E)),function(){clearTimeout(e)}}},[p,E]),a.a.createElement("div",{className:"App",style:{display:"flex",height:"1vh"}},a.a.createElement("div",null,a.a.createElement(l.a,{variant:"h5"},"Input"),a.a.createElement(u.a,{label:"Node Count",type:"number",value:v.nbVertex(),onChange:function(e){var t=Number(e.target.value);isNaN(t)||A(v.withNbVertex(t))}}),a.a.createElement(s.a,{onClick:function(){A(v.withResetedScores())}},"Clear Scores"),a.a.createElement(G,{graphState:v,onGraphStateChange:A}),a.a.createElement(D,{confidenceScore:v.computeConfidenceScore()}),a.a.createElement("pre",null,JSON.stringify(v.toEdgeScores(),null,"  ")),a.a.createElement(j,{graphState:v})),a.a.createElement("div",null,a.a.createElement(l.a,{variant:"h5"},"New Confidence Score"),a.a.createElement("div",null,a.a.createElement(f.a,{control:a.a.createElement(h.a,{checked:r,onChange:function(e,t){var r;o(r=t),r&&x(v)}}),label:"Auto Compute"}),!r&&a.a.createElement(s.a,{onClick:function(){x(v)},disabled:!!C&&L(C)},"Compute now"),a.a.createElement(u.a,{label:"Iteartion Delay",type:"number",disabled:!!C&&L(C),value:E,onChange:function(e){var t=Number(e.target.value);isNaN(t)||N(t)}})),C&&C.iterations.map(function(e,t){var r=C.iterations.length-t-1,n=C.iterations[r];return a.a.createElement("div",{key:r,style:{display:"flex",flexDirection:"row"}},a.a.createElement("div",null,a.a.createElement(l.a,{variant:"h6"},0===r?"Input State":"k="+(r-1)+" - going through "+n.vertexName(r-1)),a.a.createElement(G,{graphState:n}),a.a.createElement(D,{confidenceScore:n.computeConfidenceScore()})),a.a.createElement("div",null,a.a.createElement(j,{graphState:n})))})))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[57,1,2]]]);
//# sourceMappingURL=main.016b8594.chunk.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{56:function(e,t,r){e.exports=r(78)},62:function(e,t,r){},64:function(e,t,r){},78:function(e,t,r){"use strict";r.r(t);r(57);var n=r(0),a=r.n(n),o=r(9),c=r.n(o),i=r(15),l=(r(62),r(79)),u=r(111),s=r(109),f=r(110),h=r(112),m=r(27),d=r(30),v=r(48),y=function(e,t){var r=new URL(e);return r.search=function(e){var t=new URLSearchParams;return Object.entries(e).forEach(function(e){var r=Object(i.a)(e,2),n=r[0],a=r[1];return t.append(n,a)}),t.toString()}(t),r.href},g=function(e){return String.fromCharCode("A".charCodeAt(0)+e)},b=r(29),x=r.n(b),p=x()("#f44335"),w=x()("#4caf50").toHsv().h-p.toHsv().h,E=Object(d.range)(100).map(function(e){var t=p.toHsv();return x()(Object(v.a)({},t,{h:t.h+w*e/100})).toRgbString()}),S=function(e){var t=Math.round(e);return 0===t?"":E[t-1]},N=(r(64),function(e){var t=e.graphState,r=e.width,o=void 0===r?400:r,c=e.height,i=void 0===c?400:c,l=Object(n.useMemo)(function(){var e=m.c().id(function(e){return e.nodeName});e.distance(function(e){return 30+100*(1-e.score/100)});var t=m.a(),r=m.e().force("link",e).force("collide",m.b(30)).force("charge",m.d().strength(function(){return 15})).force("center",t).stop().nodes([]);return e.links([]),{simulation:r,forceCenter:t,forceLink:e}},[]),u=l.simulation,s=l.forceCenter,f=l.forceLink,h=Object(n.useMemo)(function(){var e=u.nodes(),r=f.links(),n=function(e,t){var r=Object(d.keyBy)(t?t.nodes:[],function(e){return e.nodeName}),n=e.vertexNames.map(function(e,t){var n={nodeName:e,index:t},a=r[e];return a&&(n.x=a.x,n.y=a.y),n}),a=e.nbVertex(),o=[],c=!0,i=!1,l=void 0;try{for(var u,s=Object(d.range)(0,a)[Symbol.iterator]();!(c=(u=s.next()).done);c=!0){var f=u.value,h=!0,m=!1,v=void 0;try{for(var y,g=Object(d.range)(f+1,a)[Symbol.iterator]();!(h=(y=g.next()).done);h=!0){var b=y.value,x=e.score100(f,b);0!==x&&o.push({edgeId:e.vertexName(f)+"-"+e.vertexName(b),source:e.vertexName(f),target:e.vertexName(b),score:x})}}catch(p){m=!0,v=p}finally{try{h||null==g.return||g.return()}finally{if(m)throw v}}}}catch(p){i=!0,l=p}finally{try{c||null==s.return||s.return()}finally{if(i)throw l}}return{links:o,nodes:n}}(t,{nodes:e,links:r}),a=n.nodes,c=n.links;s.x(o/2),s.y(i/2),u.nodes(a),f.links(c),u.alpha(1);for(var l=0;l<300;++l)u.tick();return console.log("nodes",a),console.log("links",c),{updatedNodes:a,updatedLinks:c}},[u,t,i,o,s,f]),v=h.updatedNodes,y=h.updatedLinks;return a.a.createElement("svg",{width:o,height:i},a.a.createElement("g",{className:"ForceGraph__Links"},y.map(function(e){return a.a.createElement("line",{key:e.edgeId,className:"ForceGraph__Link",stroke:S(e.score),x1:e.source.x,y1:e.source.y,x2:e.target.x,y2:e.target.y})})),a.a.createElement("g",{className:"ForceGraph__Nodes"},v.map(function(e){return a.a.createElement("g",{key:e.nodeName,className:"ForceGraph__NodeGroup",transform:"translate(".concat(e.x-10,",").concat(e.y-10,")")},a.a.createElement("circle",{className:"ForceGraph__NodeCircle",cx:10,cy:10,r:20}),a.a.createElement("text",{className:"ForceGraph__NodeText",x:10,y:10},e.nodeName),a.a.createElement("title",null,e.nodeName))})))}),k=function(e){var t,r,n=e.score;return a.a.createElement("div",{style:{display:"inline-block",width:"50px",textAlign:"right",paddingRight:"8px",backgroundColor:S(n),color:(r=n,x.a.mostReadable(S(r),["white","black"]).toString())}},(t=n,Math.round(100*t)/100))},O=r(28),j=r(49),C=r(43),V=function(){function e(t,r){Object(j.a)(this,e),this.vertexNames=t,this.scoreMatrix=r}return Object(C.a)(e,null,[{key:"fromEdgeScores",value:function(t){var r=new Set;Object.keys(t).forEach(function(e){var t=_(e),n=Object(i.a)(t,2),a=n[0],o=n[1];r.add(a),r.add(o)});var n=Array.from(r).sort(),a=n.reduce(function(e,t,r){return e[t]=r,e},{}),o=new e(n,[]);return Object.keys(t).forEach(function(e){var r=_(e),n=Object(i.a)(r,2),c=n[0],l=n[1];o=o.withScore100(a[c],a[l],t[e])}),o}}]),Object(C.a)(e,[{key:"score100",value:function(e,t){return e===t?100:e>t?this.score100(t,e):(this.scoreMatrix[e]||[])[t]||0}},{key:"score1",value:function(e,t){return this.score100(e,t)/100}},{key:"nbVertex",value:function(){return this.vertexNames.length}},{key:"withNbVertex",value:function(e){return e<this.vertexNames.length?this.withVertexNames(this.vertexNames.slice(0,e)):this.withVertexNames(Object(d.range)(e).map(g))}},{key:"withVertexNames",value:function(t){return new e(t,this.scoreMatrix)}},{key:"vertexName",value:function(e){return this.vertexNames[e]}},{key:"withScore100",value:function(t,r,n){if(t===r)throw new Error("Score not modifiable");if(t>r)return this.withScore100(r,t,n);try{var a=this.scoreMatrix,o=this.normalize(n),c=Object(O.a)(a[t]||[]);if(o===c[r])return this;c[r]=o;var i=Object(O.a)(a);return i[t]=c,new e(this.vertexNames,i)}catch(l){throw console.log(l),l}}},{key:"withResetedScores",value:function(){return e.createEmpty(this.vertexNames)}},{key:"computeConfidenceScore",value:function(){var e=this.nbVertex(),t=0,r=!0,n=!1,a=void 0;try{for(var o,c=Object(d.range)(0,e)[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var i=o.value,l=!0,u=!1,s=void 0;try{for(var f,h=Object(d.range)(i+1,e)[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var m=f.value;t+=this.score100(i,m)||0}}catch(v){u=!0,s=v}finally{try{l||null==h.return||h.return()}finally{if(u)throw s}}}}catch(v){n=!0,a=v}finally{try{r||null==c.return||c.return()}finally{if(n)throw a}}return t/(e*(e-1)/2)}},{key:"normalize",value:function(e){return Math.max(Math.min(e,100),0)}},{key:"toEdgeScores",value:function(){var e={},t=this.nbVertex(),r=!0,n=!1,a=void 0;try{for(var o,c=Object(d.range)(0,t)[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var i=o.value,l=!0,u=!1,s=void 0;try{for(var f,h=Object(d.range)(i+1,t)[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var m=f.value,v=this.score100(i,m);if(0!==v)e[this.vertexName(i)+"-"+this.vertexName(m)]=v}}catch(y){u=!0,s=y}finally{try{l||null==h.return||h.return()}finally{if(u)throw s}}}}catch(y){n=!0,a=y}finally{try{r||null==c.return||c.return()}finally{if(n)throw a}}return e}}]),e}();V.createEmpty=function(e){return new V(e,[])};var _=function(e){var t=e.split("-");if(2!==t.length)throw new Error("Invalid edge def "+e+". It must be of form <Node1>-<Node2>");var r=t[0],n=t[1];if(r===n)throw new Error("Edge def "+e+" uses twice the same node");return r<n?[r,n]:[n,r]},L=function(e){var t=e.graphState,r=e.onGraphStateChange;return a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("td",null),Object(d.range)(t.nbVertex()).map(function(e){return e>=1&&a.a.createElement("td",{key:e,style:{textAlign:"center"}},t.vertexName(e))}))),a.a.createElement("tbody",null,Object(d.range)(t.nbVertex()).map(function(e){return e<t.nbVertex()-1&&a.a.createElement("tr",{key:e},a.a.createElement("td",{style:{textAlign:"right"}},t.vertexName(e)),Object(d.range)(t.nbVertex()).map(function(n){return n>=1&&(e<n?a.a.createElement("td",{key:n,style:{backgroundColor:S(t.score100(e,n)),width:"50px"}},r?a.a.createElement(u.a,{inputProps:{min:"0",max:"100",step:"5",style:{textAlign:"right"}},type:"number",value:t.score100(e,n),onChange:function(a){var o=Number(a.target.value);isNaN(o)||r(t.withScore100(e,n,o))}}):a.a.createElement(l.a,{variant:"subtitle1"},a.a.createElement(k,{score:t.score100(e,n)}))):a.a.createElement("td",{key:n}))}))})))},G=function(e){return{iterations:[e]}},M=function(e){var t=e.iterations.length-1,r=e.iterations[t];return{iterations:[].concat(Object(O.a)(e.iterations),[A(r,t)])}},R=function(e){return e.iterations.length<e.iterations[0].nbVertex()+1},A=function(e,t){console.log("k (0 based): "+t);var r=e,n=!0,a=!1,o=void 0;try{for(var c,i=Object(d.range)(r.nbVertex())[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var l=c.value,u=!0,s=!1,f=void 0;try{for(var h,m=Object(d.range)(r.nbVertex())[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var v=h.value,y=r.score1(l,v),g=r.score1(l,t)*r.score1(t,v);y<g&&(r=r.withScore100(l,v,100*g))}}catch(b){s=!0,f=b}finally{try{u||null==m.return||m.return()}finally{if(s)throw f}}}}catch(b){a=!0,o=b}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return console.log("graphState",e,"newGrpahState",r),r},I="edges",F=function(){var e=new URLSearchParams(window.location.search);if(e.has(I))try{return V.fromEdgeScores(JSON.parse(e.get(I)))}catch(t){}return V.createEmpty(Object(d.range)(0,7).map(g))},P="delay",U=function(){var e=new URLSearchParams(window.location.search);if(e.has(P))try{return Number(e.get(P))}catch(t){}return 300},J="auto",T=function(){var e=new URLSearchParams(window.location.search);return!!e.has(J)&&"true"===e.get(J)},B=r(25);var H=function(e){var t=e.confidenceScore;return a.a.createElement(l.a,{variant:"subtitle1"},"Confidence Score: ",a.a.createElement(k,{score:t}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(function(){var e=a.a.useState(T()),t=Object(i.a)(e,2),r=t[0],o=t[1],c=a.a.useState(F()),m=Object(i.a)(c,2),d=m[0],v=m[1],g=a.a.useState(r?d:null),b=Object(i.a)(g,2),x=b[0],p=b[1],w=a.a.useState(U()),E=Object(i.a)(w,2),S=E[0],k=E[1],O=a.a.useState(null),j=Object(i.a)(O,2),C=j[0],V=j[1],_=function(e){v(e),r&&p(e)};return Object(n.useEffect)(function(){!function(e,t,r){var n,a=(n={},Object(B.a)(n,P,String(e)),Object(B.a)(n,J,String(t)),Object(B.a)(n,I,JSON.stringify(r.toEdgeScores())),n),o=window.location.href,c=y(o,a);c!==o&&window.history.pushState("","Update Params",c)}(S,r,d)},[d,r,S]),Object(n.useEffect)(function(){if(null!==x){var e,t=G(x);return V(t),R(t)&&(e=setTimeout(function r(){t=M(t),V(t),R(t)&&(e=setTimeout(r,S))},S)),function(){clearTimeout(e)}}},[x,S]),a.a.createElement("div",{className:"App",style:{display:"flex",height:"1vh"}},a.a.createElement("div",null,a.a.createElement(l.a,{variant:"h5"},"Input"),a.a.createElement(u.a,{label:"Node Count",type:"number",value:d.nbVertex(),onChange:function(e){var t=Number(e.target.value);isNaN(t)||_(d.withNbVertex(t))}}),a.a.createElement(s.a,{onClick:function(){_(d.withResetedScores())}},"Clear Scores"),a.a.createElement(L,{graphState:d,onGraphStateChange:_}),a.a.createElement(H,{confidenceScore:d.computeConfidenceScore()}),a.a.createElement("pre",null,JSON.stringify(d.toEdgeScores(),null,"  ")),a.a.createElement(N,{graphState:d})),a.a.createElement("div",null,a.a.createElement(l.a,{variant:"h5"},"New Confidence Score"),a.a.createElement("div",null,a.a.createElement(f.a,{control:a.a.createElement(h.a,{checked:r,onChange:function(e,t){var r;o(r=t),r&&p(d)}}),label:"Auto Compute"}),!r&&a.a.createElement(s.a,{onClick:function(){p(d)},disabled:!!C&&R(C)},"Compute now"),a.a.createElement(u.a,{label:"Iteartion Delay",type:"number",disabled:!!C&&R(C),value:S,onChange:function(e){var t=Number(e.target.value);isNaN(t)||k(t)}})),C&&C.iterations.map(function(e,t){var r=C.iterations.length-t-1,n=C.iterations[r];return a.a.createElement("div",{key:r,style:{display:"flex",flexDirection:"row"}},a.a.createElement("div",null,a.a.createElement(l.a,{variant:"h6"},0===r?"Input State":"k="+(r-1)+" - going through "+n.vertexName(r-1)),a.a.createElement(L,{graphState:n}),a.a.createElement(H,{confidenceScore:n.computeConfidenceScore()})),a.a.createElement("div",null,a.a.createElement(N,{graphState:n})))})))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[56,1,2]]]);
//# sourceMappingURL=main.0b445f8f.chunk.js.map